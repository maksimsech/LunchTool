@{
    ViewData["Title"] = "Администрирование: поставщики";
}
@model IEnumerable<LunchTool.Web.ViewModels.ProviderViewModel>

<div class="row">
    <form asp-action="AddProvider" asp-controller="Administration" method="post" class="card col-md-8 offset-md-2">
        <div class="form-group">
            <label for="Name">Название</label>
            <input type="text" name="Name" value="" class="form-control" />
        </div>
        <div class="form-group">
            <label for="Address">Адрес</label>
            <input type="text" name="Address" value="" class="form-control" />
        </div>
        <div class="form-group">
            <label for="Email">Email</label>
            <input type="email" name="Email" value="" class="form-control" />
        </div>
        <div class="form-group">
            <label for="StartWork">Начало работы</label>
            <input type="time" name="StartWork" value="" class="form-control" />
        </div>
        <div class="form-group">
            <label for="EndWork">Окончание работы</label>
            <input type="time" name="EndWork" value="" class="form-control" />
        </div>
        <div class="form-group">
            <label for="PhoneNumber">Номер</label>
            <input type="text" name="PhoneNumber" value="" class="form-control" />
        </div>
        <div class="form-group">
            <input type="submit" name="" value="Потвердить" class="btn btn-primary" />
        </div>
    </form>
</div>
<table class="table">
    <tr><td>Id</td><td>Название</td><td>Адрес</td><td>Email</td><td>Начало работы</td><td>Окончание работы</td><td>Номер</td><td>Активен</td><td></td><td></td></tr>
    @foreach (var item in Model)
    {
    <tr onclick="window.location=''">
        <td>@item.Id</td>
        <td><a asp-action="Menus" asp-controller="Administration" asp-route-id="@item.Id">@item.Name</a></td>
        <td>@item.Address</td>
        <td>@item.Email</td>
        <td>
            @if (item.StartWork != null) { @String.Format("{0}:{1}", item.StartWork.Value.Hour, item.StartWork.Value.Minute); }
        </td>
        <td>
            @if (item.EndWork != null) { @String.Format("{0}:{1}", item.EndWork.Value.Hour, item.EndWork.Value.Minute); }
        </td>
        <td>
            @if (item.PhoneNumber != null) { @item.PhoneNumber }
        </td>
        <td>
            @if (item.Active)
            {
                <div>Да</div>
            }
            else
            {
                <div>Нет</div>
            }
        </td>
        <td>
            <a asp-action="ChangeProvider" asp-controller="Administration" asp-route-id="@item.Id">Изменить</a>
        </td>
        @if (item.Active)
        {
            <td>
                <a href="javascript:deleteProvider('@item.Id')">Деактивировать</a>
            </td>
        }
        else
        {
            <td>

            </td>
        }
      </tr>
    }
</table>

<script>
    function deleteProvider(id) {
        $.post("DeactivateProvider/", { id: id }).done(function (done) {}); 
    }
</script>